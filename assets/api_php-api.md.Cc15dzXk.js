import{_ as t,c as i,o as e,ag as a}from"./chunks/framework.D7F4Kr4v.js";const c=JSON.parse('{"title":"PHP API","description":"ncr_add_relation, ncr_get_related, ncr_remove_relation, and custom types. Full reference and examples.","frontmatter":{"title":"PHP API","description":"ncr_add_relation, ncr_get_related, ncr_remove_relation, and custom types. Full reference and examples."},"headers":[],"relativePath":"api/php-api.md","filePath":"api/php-api.md","lastUpdated":1771058779000}'),r={name:"api/php-api.md"};function n(d,s,p,l,o,h){return e(),i("div",null,[...s[0]||(s[0]=[a(`<h1 id="php-api" tabindex="-1">PHP API <a class="header-anchor" href="#php-api" aria-label="Permalink to &quot;PHP API&quot;">​</a></h1><p>The primary API uses the <code>ncr_</code> prefix. Legacy <code>wp_*</code> wrappers remain for backward compatibility.</p><h2 id="quick-reference" tabindex="-1">Quick reference <a class="header-anchor" href="#quick-reference" aria-label="Permalink to &quot;Quick reference&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Purpose</th></tr></thead><tbody><tr><td><code>ncr_add_relation( $from_id, $from_type, $to_id, $to_type, $relation_type )</code></td><td>Create one relationship</td></tr><tr><td><code>ncr_get_related( $from_id, $from_type, $relation_type, $args = [] )</code></td><td>Get related IDs or objects</td></tr><tr><td><code>ncr_remove_relation( $from_id, $from_type, $to_id, $to_type, $relation_type )</code></td><td>Remove one or all (use <code>$to_id = null</code> for all)</td></tr><tr><td><code>ncr_register_relation_type( $args )</code></td><td>Register a custom relation type</td></tr><tr><td><code>ncr_get_registered_relation_types()</code></td><td>List registered types</td></tr></tbody></table><p>Object types: <code>&#39;post&#39;</code>, <code>&#39;user&#39;</code>, <code>&#39;term&#39;</code>. See <a href="/WP-Native-Content-Relationships/guide/relationships.html">Relationships</a> for copy-paste examples.</p><hr><h2 id="ncr-add-relation" tabindex="-1">ncr_add_relation() <a class="header-anchor" href="#ncr-add-relation" aria-label="Permalink to &quot;ncr_add_relation()&quot;">​</a></h2><p>Creates a relationship between two objects.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ncr_add_relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( $from_id, $from_type, $to_id, $to_type, $relation_type );</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>$from_id</code></td><td>int</td><td>Source object ID</td></tr><tr><td><code>$from_type</code></td><td>string</td><td><code>&#39;post&#39;</code>, <code>&#39;user&#39;</code>, or <code>&#39;term&#39;</code></td></tr><tr><td><code>$to_id</code></td><td>int</td><td>Target object ID</td></tr><tr><td><code>$to_type</code></td><td>string</td><td><code>&#39;post&#39;</code>, <code>&#39;user&#39;</code>, or <code>&#39;term&#39;</code></td></tr><tr><td><code>$relation_type</code></td><td>string</td><td>Registered relation type slug</td></tr></tbody></table><p><strong>Returns:</strong> <code>int</code> relation ID on success, <code>WP_Error</code> on failure.</p><p><strong>Example:</strong></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Link post 123 to post 456 as &quot;related_to&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$relation_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ncr_add_relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">456</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;related_to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ( </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">is_wp_error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( $relation_id ) ) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// Handle error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ncr-get-related" tabindex="-1">ncr_get_related() <a class="header-anchor" href="#ncr-get-related" aria-label="Permalink to &quot;ncr_get_related()&quot;">​</a></h2><p>Retrieves related objects.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ncr_get_related</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( $from_id, $from_type, $relation_type, $args </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [] );</span></span></code></pre></div><table tabindex="0"><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>$from_id</code></td><td>int</td><td>Source object ID</td></tr><tr><td><code>$from_type</code></td><td>string</td><td><code>&#39;post&#39;</code>, <code>&#39;user&#39;</code>, or <code>&#39;term&#39;</code></td></tr><tr><td><code>$relation_type</code></td><td>string</td><td>Relation type slug</td></tr><tr><td><code>$args</code></td><td>array</td><td><code>limit</code>, <code>orderby</code>, <code>order</code>, <code>direction</code></td></tr></tbody></table><p><strong>Returns:</strong> Array of related IDs or objects, or <code>WP_Error</code>.</p><p><strong>Example:</strong></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$related </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ncr_get_related</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">get_the_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;related_to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;limit&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;orderby&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;created&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;order&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;DESC&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">foreach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ( (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) $related </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $post_id ) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">	echo</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_the_title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( $post_id );</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="ncr-remove-relation" tabindex="-1">ncr_remove_relation() <a class="header-anchor" href="#ncr-remove-relation" aria-label="Permalink to &quot;ncr_remove_relation()&quot;">​</a></h2><p>Removes one or more relationships.</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ncr_remove_relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( $from_id, $from_type, $to_id, $to_type, $relation_type );</span></span></code></pre></div><p>Use <code>$to_id = null</code> to remove all relations of that type from <code>$from_id</code>.</p><p><strong>Returns:</strong> <code>true</code> on success, <code>WP_Error</code> on failure.</p><p><strong>Example:</strong></p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Remove one relation</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ncr_remove_relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">456</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;related_to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> );</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Remove all &quot;related_to&quot; from post 123</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ncr_remove_relation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">123</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;post&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;related_to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> );</span></span></code></pre></div><h2 id="legacy-wrappers" tabindex="-1">Legacy wrappers <a class="header-anchor" href="#legacy-wrappers" aria-label="Permalink to &quot;Legacy wrappers&quot;">​</a></h2><ul><li><code>wp_add_relation( $from_id, $to_id, $type, $direction, $to_type )</code></li><li><code>wp_get_related( $post_id, $type, $args, $to_type )</code></li><li><code>wp_remove_relation( $from_id, $to_id, $type, $to_type )</code></li><li><code>wp_get_related_users()</code>, <code>wp_get_related_terms()</code>, <code>wp_get_related_products()</code> (WooCommerce)</li></ul><p>Prefer <code>ncr_*</code> for new code.</p>`,30)])])}const E=t(r,[["render",n]]);export{c as __pageData,E as default};
