import{_ as e,c as o,o as n,ag as a}from"./chunks/framework.D7F4Kr4v.js";const g=JSON.parse('{"title":"Admin & Tools","description":"Overview table, Integrity check, Orphaned relations, Import/Export, Site Health, Auto-relations.","frontmatter":{"title":"Admin & Tools","description":"Overview table, Integrity check, Orphaned relations, Import/Export, Site Health, Auto-relations."},"headers":[],"relativePath":"tools/admin-tools.md","filePath":"tools/admin-tools.md","lastUpdated":1771061476000}'),r={name:"tools/admin-tools.md"};function i(s,t,l,d,h,c){return n(),o("div",null,[...t[0]||(t[0]=[a('<h1 id="admin-tools" tabindex="-1">Admin &amp; Tools <a class="header-anchor" href="#admin-tools" aria-label="Permalink to &quot;Admin &amp; Tools&quot;">​</a></h1><p>NCR provides several admin screens and background tools to view, clean, and maintain relationship data. Access most of them under <strong>Settings → Content Relationships</strong> (tabs or sub-pages depending on version).</p><hr><h2 id="overview-table" tabindex="-1">Overview table <a class="header-anchor" href="#overview-table" aria-label="Permalink to &quot;Overview table&quot;">​</a></h2><p>A read-only <strong>list table</strong> of all relationships in the database.</p><ul><li><strong>Columns:</strong> From, Type, To, Direction, Date.</li><li><strong>Sortable:</strong> By date, type.</li><li><strong>Pagination:</strong> Configurable per page (e.g. 20 items).</li><li><strong>Use case:</strong> Audit relations, find by type or post.</li></ul><p>Location: typically <strong>Content Relationships → Overview</strong> or similar in the plugin menu.</p><hr><h2 id="integrity-check" tabindex="-1">Integrity check <a class="header-anchor" href="#integrity-check" aria-label="Permalink to &quot;Integrity check&quot;">​</a></h2><p>Finds and optionally <strong>removes invalid relationships</strong>: rows where the source or target post/user/term no longer exists (e.g. content was deleted).</p><ul><li><strong>Automatic:</strong> Runs once per day in the background (admin init). No UI required.</li><li><strong>Manual (WP-CLI):</strong><br><code>wp content-relations check</code> — report only<br><code>wp content-relations check --fix</code> — remove invalid rows<br><code>wp content-relations check --fix --verbose</code> — list each cleaned ID<br><code>wp content-relations sync</code> — same as check with optional <code>--fix</code> (alias behavior).</li><li><strong>Batch size:</strong> Use <code>--batch-size=500</code> for large tables.</li></ul><p>See <a href="/WP-Native-Content-Relationships/api/wp-cli.html#count-and-verify">WP-CLI</a>.</p><hr><h2 id="orphaned-relationships" tabindex="-1">Orphaned relationships <a class="header-anchor" href="#orphaned-relationships" aria-label="Permalink to &quot;Orphaned relationships&quot;">​</a></h2><p><strong>Orphaned</strong> = relations whose from_id or to_id points to deleted content. The <strong>Orphaned</strong> tool checks for these (e.g. once per week) and can show an <strong>admin notice</strong> when the count is greater than zero, with a link to run cleanup (Integrity check) or view the overview.</p><ul><li><strong>Notice:</strong> Dismissible; encourages running an integrity check or visiting the tools page.</li><li><strong>Cleanup:</strong> Use <strong>Integrity check</strong> with <strong>Fix</strong> (admin or WP-CLI) to delete orphaned rows.</li></ul><hr><h2 id="import-export" tabindex="-1">Import / Export <a class="header-anchor" href="#import-export" aria-label="Permalink to &quot;Import / Export&quot;">​</a></h2><p><strong>Export:</strong> Download all relationships as a <strong>JSON file</strong>. Use before migrations or bulk changes.</p><p><strong>Import:</strong> Upload a previously exported JSON file. <strong>Adds</strong> relationships; does not delete existing ones. Duplicates (same from_id, to_id, type) are skipped.</p><ul><li><strong>Location:</strong> <strong>Settings → Content Relationships → Import/Export</strong> (or Tools submenu).</li><li><strong>Permissions:</strong> <code>manage_options</code> (administrator).</li><li><strong>Use case:</strong> Backup, migrate between sites (ensure post/user/term IDs match on destination), or restore after a mistake.</li></ul><hr><h2 id="site-health" tabindex="-1">Site Health <a class="header-anchor" href="#site-health" aria-label="Permalink to &quot;Site Health&quot;">​</a></h2><p>NCR adds a <strong>Relationship Integrity</strong> test under <strong>Tools → Site Health</strong>.</p><ul><li><strong>What it does:</strong> Runs a quick integrity audit (e.g. dry run, small batch). If invalid relations are found, status is “Recommended” and the description suggests running a manual integrity check.</li><li><strong>Action link:</strong> Points to the Integrity/Tools page so you can run a full check or fix.</li></ul><hr><h2 id="auto-relations-optional" tabindex="-1">Auto-relations (optional) <a class="header-anchor" href="#auto-relations-optional" aria-label="Permalink to &quot;Auto-relations (optional)&quot;">​</a></h2><p><strong>Automatic relations on publish:</strong> When enabled in settings, publishing a post can automatically create a relationship to its <strong>parent</strong> (e.g. page hierarchy) using the type <strong>part_of</strong>.</p><ul><li><strong>Setting:</strong> <strong>Settings → Content Relationships</strong> — enable “Auto relation” and choose post types (e.g. post, page).</li><li><strong>Behavior:</strong> On <code>publish_{post_type}</code>, if the post has a parent, NCR creates a <code>part_of</code> relation from the new post to the parent (if not already related).</li><li><strong>Use case:</strong> Keep “child” content linked to parent pages without manual linking.</li></ul><hr><h2 id="summary" tabindex="-1">Summary <a class="header-anchor" href="#summary" aria-label="Permalink to &quot;Summary&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Feature</th><th>Where</th><th>Purpose</th></tr></thead><tbody><tr><td>Overview table</td><td>Content Relationships menu</td><td>View all relations</td></tr><tr><td>Integrity check</td><td>Background + WP-CLI <code>check --fix</code></td><td>Remove invalid/orphaned rows</td></tr><tr><td>Orphaned notice</td><td>Admin notice (weekly check)</td><td>Alert when orphans exist</td></tr><tr><td>Import/Export</td><td>Settings → Content Relationships</td><td>Backup, migrate, restore</td></tr><tr><td>Site Health test</td><td>Tools → Site Health</td><td>Quick integrity status</td></tr><tr><td>Auto-relations</td><td>Settings (optional)</td><td>Auto link to parent on publish</td></tr></tbody></table><hr><h2 id="see-also" tabindex="-1">See also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See also&quot;">​</a></h2><ul><li><a href="/WP-Native-Content-Relationships/api/wp-cli.html">WP-CLI</a> — <code>list</code>, <code>add</code>, <code>remove</code>, <code>check</code>, <code>sync</code>, <code>schema</code></li><li><a href="/WP-Native-Content-Relationships/guide/troubleshooting.html">Troubleshooting</a> — Duplicate or wrong relations after migration</li></ul>',35)])])}const u=e(r,[["render",i]]);export{g as __pageData,u as default};
