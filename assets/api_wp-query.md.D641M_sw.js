import{_ as i,c as a,o as e,ag as t}from"./chunks/framework.D7F4Kr4v.js";const c=JSON.parse('{"title":"WP_Query","description":"","frontmatter":{"title":"WP_Query"},"headers":[],"relativePath":"api/wp-query.md","filePath":"api/wp-query.md","lastUpdated":1771059521000}'),n={name:"api/wp-query.md"};function l(p,s,r,h,o,k){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="wp-query-integration" tabindex="-1">WP_Query Integration <a class="header-anchor" href="#wp-query-integration" aria-label="Permalink to &quot;WP_Query Integration&quot;">​</a></h1><p>Query posts (or other post types) by relationship using standard <code>WP_Query</code>.</p><h2 id="recommended-content-relation" tabindex="-1">Recommended: content_relation <a class="header-anchor" href="#recommended-content-relation" aria-label="Permalink to &quot;Recommended: content_relation&quot;">​</a></h2><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$query </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> WP_Query</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;content_relation&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;post_id&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_the_ID</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;type&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;related_to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;direction&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;outgoing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// or &#39;incoming&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;posts_per_page&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre></div><p>Registered query vars (so WordPress does not strip them): <code>content_relation</code>, <code>wpcr</code>, <code>related_to</code>, <code>relation_type</code>. See the plugin’s query class docblock for full shapes.</p><h2 id="legacy-formats" tabindex="-1">Legacy formats <a class="header-anchor" href="#legacy-formats" aria-label="Permalink to &quot;Legacy formats&quot;">​</a></h2><ul><li><strong>wpcr:</strong> <code>&#39;wpcr&#39; =&gt; [ &#39;from&#39; =&gt; 123, &#39;type&#39; =&gt; &#39;related_to&#39;, &#39;direction&#39; =&gt; &#39;outgoing&#39; ]</code></li><li><strong>related_to:</strong> <code>&#39;related_to&#39; =&gt; 123</code>, <code>&#39;relation_type&#39; =&gt; &#39;related_to&#39;</code></li></ul><h2 id="delegation-future-core-api" tabindex="-1">Delegation (future core API) <a class="header-anchor" href="#delegation-future-core-api" aria-label="Permalink to &quot;Delegation (future core API)&quot;">​</a></h2><p>If WordPress adds a native relationship API, you can skip this plugin’s JOIN/WHERE by returning <code>true</code> from the filter:</p><div class="language-php vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">php</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add_filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ncr_skip_relationship_query&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">( $skip, $query ) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // e.g. if core query var is set, let core handle it</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $skip;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> );</span></span></code></pre></div>`,10)])])}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
